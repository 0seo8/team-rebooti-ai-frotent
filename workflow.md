# 리부뜨 프론트엔드 사전 과제 작업 계획

## 현재 상황 분석

### 프로젝트 개요

- **프로젝트명**: 전자 도장을 찍어보자!
- **목적**: PDF 파일에 전자 도장을 삽입하는 웹 애플리케이션 개발
- **상태**: 핵심 기능 완성 중

### 기술 스택

- **프레임워크**: React 19.0.0
- **빌드 도구**: Vite 6.2.0
- **언어**: TypeScript 5.7.2
- **주요 라이브러리**: pdf-lib, pdfjs-dist, fabric.js, zustand, styled-components

### 현재 문제점

- 코드 구조: 의미 없는 파일명(A.tsx 등), 비체계적 폴더, 분산된 CSS.
- 환경 설정: 비표준 스크립트(`npm run vite`), CSS-in-JS 미설치, 테스트 설정 없음.
- 기타: 타입 정의 불완전, 구조 개선 필요.

## 작업 계획 진행 상태

### 1. 환경 설정 ✅

- [x] npm 스크립트 수정:
  - `npm run dev` 개발 모드.
  - `npm run build` 프로덕션 모드.
- [x] ESLint, Prettier 설정.
- [x] CSS-in-JS 설치 (styled-components).
- [x] 폴더 구조 재구성 (components, hooks, store, styles, utils).

### 2. 컴포넌트 재구성 ✅

- [x] 컴포넌트 책임 명확화.
  - FileUploader: PDF 파일 업로드 담당
  - StampUploader: 도장 이미지 관리 담당
  - PDFCanvas: 도장 찍기 기능과 PDF 다운로드 담당
  - PDFPreview: PDF 페이지 미리보기 담당
- [x] 재사용 컴포넌트 분리.

### 3. 라이브러리 분석 ✅

- [x] `pdf-lib`: PDF 편집 및 도장 삽입.
- [x] `pdfjs-dist`: 모든 페이지 미리보기 구현.
- [x] `fabric.js`: 캔버스 기반 도장 배치.

### 4. 코어 기능

#### 구현된 부분 ✅

- [x] **PDF 파일 업로드**:
  - 파일 형식 제한 (PDF만 허용)
  - 유효성 검사
- [x] **PDF 페이지 미리보기**:
  - `pdfjs-dist`로 PDF 페이지를 이미지로 변환
  - 모든 페이지 미리보기 지원
  - 페이지 이동 기능 (이전/다음)
- [x] **도장 이미지 업로드**:
  - 최대 5개 제한
  - 파일 형식 제한 (PNG만 허용)
  - 업로드된 도장 목록 확인
- [x] **도장 이미지 선택 및 배치 기능**:
  - 캔버스에 도장 배치 및 위치 조정
  - 도장 크기 조정 기능
- [x] **도장 찍기 기능**:
  - 현재 페이지에 도장 적용
  - 페이지별 도장 상태 관리
- [x] **다운로드 기능**:
  - 도장이 적용된 PDF 다운로드
  - 현재 페이지를 이미지(PNG)로 다운로드
- [x] **캔버스 초기화 및 관리**:
  - PDFCanvas에 PDF가 정상적으로 표시
  - 도장 객체 관리
- [x] **PDF 삭제 기능**:
  - 파일 삭제 버튼 추가
  - 삭제 전 확인 과정 구현
  - 사용자 피드백 제공
  - `useFileManager` 훅으로 기능 분리

#### 미구현된 부분 ❌

- [ ] **도장 이미지 자동 선택**:
  - 업로드 후 자동 선택 기능 없음
- [ ] **대용량 PDF 처리 및 성능 최적화**:
  - 대용량 PDF 처리 시 성능 이슈 가능성 존재
  - 파일 크기 제한 처리 미흡
- [ ] **예외 처리 개선**:
  - 파일 크기 제한 처리 불명확
  - 네트워크 오류 등 일부 예외 상황 처리 필요
- [ ] **테스트 코드**:
  - 기능 테스트 및 예외 처리 검증 코드 없음

### 5. 타입 정의 및 리팩토링 ✅

- [x] 인터페이스/타입 정의.
- [x] 컴포넌트 재구성.
- [x] CSS-in-JS로 스타일 마이그레이션.
- [x] 훅 분리 (usePdfDownloader, useImageDownloader, useStampAdder, useFileManager 등).

### 6. 성능 최적화 (진행 중) ⏳

- [x] 페이지 로딩 최적화 (현재/이전/다음 페이지 미리 로드)
- [ ] 대용량 PDF 처리 개선 필요
- [ ] 리소스 관리 개선 필요

### 7. 예외 처리 (진행 중) ⏳

- [x] 기본적인 파일 형식 검증
- [x] 사용자 피드백 제공 (toast 알림)
- [ ] 파일 크기 제한 처리 개선 필요
- [ ] 네트워크 오류 처리 개선 필요

## 현재 작업 상태 요약

### 구현 완료된 기능

1. **개발 환경 설정**:

  - npm 스크립트 (`dev`, `build`, `lint`, `format`)
  - ESLint, Prettier 설정
  - 폴더 구조 개선

2. **PDF 관련 기능**:

  - PDF 파일 업로드
  - PDF 페이지 미리보기 (모든 페이지)
  - 페이지 이동 (이전/다음)
  - PDF 파일 삭제 (확인 과정 포함)

3. **도장 관련 기능**:

  - 도장 이미지 업로드 (최대 5개)
  - 도장 선택 및 위치 조정
  - 현재 페이지에 도장 적용

4. **다운로드 기능**:

  - 도장 적용된 PDF 다운로드
  - 현재 페이지 이미지 다운로드

5. **코드 품질**:
  - 타입 정의
  - 컴포넌트 책임 분리
  - 커스텀 훅 분리 (기능별 훅 구현)

### 남은 작업

1. **도장 이미지 업로드 후 자동 선택** 기능 추가
2. **대용량 PDF 처리 성능 최적화**
3. **예외 처리 개선**:
  - 파일 크기 제한
  - 네트워크 오류 처리
4. **테스트 코드** 작성
5. **UI/UX 개선** (필요한 경우)

## 다음 작업 우선순위

1. 도장 이미지 업로드 후 자동 선택 기능 추가
2. 파일 크기 제한 및 예외 처리 개선
3. 대용량 PDF 처리 성능 최적화
4. 테스트 코드 작성
